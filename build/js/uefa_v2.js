'use strict';

// 全局变量:
var prefix = 'http://10.124.18.115:8080/';
var path = 'api/v1/activity/worldcup/';
var uuid;
var reqUrl = '../api.json'; // 本地临时测试用
var voteTeam;
var cards = {
  date_1: [],
  date_2: [],
  date_3: [],
  date_4: [],
  date_5: []
};
var date = new Date();
var day = date.getDate();
var dateString_1 = void 0;
var dateString_2 = void 0;
var dateString_3 = void 0;
var dateString_4 = void 0;
var dateString_5 = void 0;

// 通用函数们:
// 1. ajax get&post functions
var ajaxGet = function ajaxGet(url, success_cb, fail_cb) {
  $.ajax({
    type: 'GET',
    url: url,
    dataType: 'json'
  }).done(function (data, textStatus, jqXHR) {
    success_cb(data);
  }).fail(function (jqXHR, textStatus, errorThrown) {
    fail_cb(errorThrown);
  });
};
var ajaxPost = function ajaxPost(url, data, success_cb, fail_cb) {
  $.ajax({
    type: 'POST',
    url: url,
    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
    data: data
  }).done(function (data, textStatus, jqXHR) {
    success_cb(data);
  }).fail(function (jqXHR, textStatus, errorThrown) {
    fail_cb(errorThrown);
  });
};

// 2. 生成 html 组件
var createHtmlP = function createHtmlP(text) {
  var style = arguments.length <= 1 || arguments[1] === undefined ? undefined : arguments[1];

  if (style === undefined) {
    return $('<p>' + text + '</p>');
  }

  // 如果有样式传入，加上样式
  var styles = '';
  for (var key in style) {
    styles = styles + key + ':' + style[key] + ';';
  }
  return $('<p style="' + styles + '">' + text + '</p>');
};
var createHtmlImg = function createHtmlImg(src, alt) {
  return $('<img alt="' + alt + '" src="' + src + '" />');
};
var createHtmlButton = function createHtmlButton(text, team, uuid) {
  return $('<button data-team="' + team + '" data-uuid="' + uuid + '">' + text + '</button>');
};
var createHtmlDiv = function createHtmlDiv(listOfElements, divClassName) {
  var tempDiv = $('<div class="' + divClassName + '">' + '</div>');
  for (var i = 0; i < listOfElements.length; i++) {
    listOfElements[i].appendTo(tempDiv);
  }
  return tempDiv;
};

// 3. 动态生成一个比赛对阵卡
var createHtmlGameCard = function createHtmlGameCard(hostName, hostNameCN, guestName, guestNameCN, time, uuid) {
  var hostTitle = createHtmlP(hostNameCN);
  // const hostFlag = createHtmlImg('./images/' + hostName + '.png', 'hostFLag');
  var hostFlag = createHtmlImg('./images/french.png', 'hostFLag');
  var hostVoteButton = createHtmlButton('点击投票', hostName, uuid);
  var guestTitle = createHtmlP(guestNameCN);
  // const guestFlag = createHtmlImg('./images/' + guestName + '.png', 'guestFLag');
  var guestFlag = createHtmlImg('./images/romania.png', 'guestFLag');
  var guestVoteButton = createHtmlButton('点击投票', guestName, uuid);
  var leftDiv = createHtmlDiv([hostTitle, hostFlag, hostVoteButton], 'page0-gamecard-left');
  var midDiv = createHtmlDiv([createHtmlP('vs'), createHtmlP(time)], 'page0-gamecard-mid');
  var rightDiv = createHtmlDiv([guestTitle, guestFlag, guestVoteButton], 'page0-gamecard-right');
  var cardDiv = createHtmlDiv([leftDiv, midDiv, rightDiv], 'page0-timetable-game');

  return cardDiv;
};

// 4. 添加或删除 某一天的比赛卡片
var addGameCardsOnOneDayInHtml = function addGameCardsOnOneDayInHtml(cardsOnOneDay) {
  for (var i in cardsOnOneDay) {
    cardsOnOneDay[i].addClass('animated flipInX');
    $('.page0-timetable').append(cardsOnOneDay[i]);
  }
  // 给投票按钮添加click事件监听
  $('.page0-timetable-game button').on('click', function (event) {
    event.preventDefault();
    voteTeam = this.dataset.team;
    uuid = this.dataset.uuid;
    $('#myModal').modal('show');
  });
};
var removeGameCardsOnOneDayInHtml = function removeGameCardsOnOneDayInHtml(cardsOnOneDay) {
  for (var i in cardsOnOneDay) {
    cardsOnOneDay[i].removeClass('flipInX');
    cardsOnOneDay[i].remove();
  }
};

// 5. ajax callback functions
var getInfo = function getInfo(data) {
  console.log(data);
  $('#date_1').text(dateString_1.substring(5));
  $('#date_2').text(dateString_2.substring(5));
  $('#date_3').text(dateString_3.substring(5));
  $('#date_4').text(dateString_4.substring(5));
  $('#date_5').text(dateString_5.substring(5));

  // 将卡片存储于cards
  for (var i = 0; i < data.data.races.length; i++) {
    // console.log(data.data.races[i].meta.startAt.split(' ')[0]);
    var race = data.data.races[i];
    var tempCard = createHtmlGameCard(race.host.name, race.host.nameCN, race.guest.name, race.guest.nameCN, race.meta.startAt.split(' ')[1].substring(0, 5), race.uuid);
    switch (data.data.races[i].meta.startAt.split(' ')[0]) {
      case dateString_1:
        cards.date_1.push(tempCard);
        break;
      case dateString_2:
        cards.date_2.push(tempCard);
        break;
      case dateString_3:
        cards.date_3.push(tempCard);
        break;
      case dateString_4:
        cards.date_4.push(tempCard);
        break;
      case dateString_5:
        cards.date_5.push(tempCard);
        break;
      default:
        break;
    }
  }

  // 为没有赛事的date添加无赛事卡片
  for (var i in cards) {
    if (cards[i].length == 0) {
      cards[i].push(createHtmlP('无赛事', {
        'width': '100%',
        'font-size': '2rem',
        'text-align': 'center'
      }));
    }
  }
  // 默认为今天的比赛
  addGameCardsOnOneDayInHtml(cards.date_3);
};
var postPhoneNumber = function postPhoneNumber(data) {
  if (data.errcode === undefined) {
    $('#wrongMsg').text('参与成功！');
    $('#wrongMsg').css('display', 'block');
    // 投票成功后，过两秒关闭modal窗口
    window.setTimeout(function () {
      $('#wrongMsg').css('display', 'none');
      $('#myModal').modal('hide');
    }, 2000);
    // 改变已投场次的按钮样式，并disabled按钮
    $('.page0-timetable-game button').each(function (i) {
      console.log(this.dataset.uuid);
      if (this.dataset.uuid == uuid) {
        $(this).attr('disabled', 'disabled');
        $(this).css('background-color', '#95a5a6');
        $(this).text('已投票');
      }
    });
  } else {
    var errorMsg;
    switch (data.errcode) {
      case 400717:
        errorMsg = "投票已截止！";
        break;
      case 400718:
        errorMsg = "发生错误，请重新输入！";
        break;
      case 400719:
        errorMsg = "手机号码错误！";
        break;
      case 400720:
        errorMsg = "发生错误，请重新输入！";
        break;
      case 400721:
        errorMsg = "此手机号已投过票了哦！";
        break;
      default:
        errorMsg = "发生未知错误，请重新输入！";
        break;
    }
  }
};
var handleAjaxFail = function handleAjaxFail(errorThrown) {
  // TODO 可用进度条替代
};

// ***********
// **程序开始**
// ***********
(function () {
  ajaxGet(reqUrl, getInfo, handleAjaxFail);

  // 设置5天的时间string，用于判断比赛日期
  switch (day) {
    case 29:
      dateString_1 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 2).toString();
      dateString_2 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 1).toString();
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 1).toString();
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 2).toString() + '-' + '1';
      break;
    case 30:
      dateString_1 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 2).toString();
      dateString_2 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 1).toString();
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 2).toString() + '-' + '1';
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 2).toString() + '-' + '2';
      break;
    case 1:
      dateString_1 = date.getFullYear().toString() + '-' + date.getMonth().toString() + '-' + '29';
      dateString_2 = date.getFullYear().toString() + '-' + date.getMonth().toString() + '-' + '30';
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 1).toString();
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 2).toString();
      break;
    case 2:
      dateString_1 = date.getFullYear().toString() + '-' + date.getMonth().toString() + '-' + '30';
      dateString_2 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 1).toString();
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 1).toString();
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 2).toString();
      break;
    default:
      dateString_1 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 2).toString();
      dateString_2 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 1).toString();
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 1).toString();
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 2).toString();
      break;
  }

  // 监听日期栏点击事件，为了切换日期和比赛卡片
  $('.page0-date').on('click', function (event) {
    event.preventDefault();
    $('.page0-date').each(function () {
      if ($(this).hasClass('active-date')) {
        removeGameCardsOnOneDayInHtml(cards[$(this).attr('id')]);
        $(this).removeClass('active-date');
      }
    });
    $(this).addClass('active-date');
    addGameCardsOnOneDayInHtml(cards[$(this).attr('id')]);
  });

  // 监听投票modal框事件
  $('#join').on('click', function (event) {
    event.preventDefault();
    var phoneNumber = $('#userPhoneInput').val();
    var phoneNumberRegExp = new RegExp('(^(13\\d|15[^4,\\D]|17[13678]|18\\d)\\d{8}|170[^346,\\D]\\d{7})$', 'g');
    if (!phoneNumberRegExp.test(phoneNumber)) {
      $('#wrongMsg').text('手机号有误，请重试！');
      $('#wrongMsg').css('display', 'block');
    } else {
      ajaxPost(prefix + path + uuid, 'phone=' + phoneNumber + '&team=' + voteTeam, postPhoneNumber, handleAjaxFail);
    }
  });
})();
//# sourceMappingURL=data:application/json;base64,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QXhFRCIsImZpbGUiOiJ1ZWZhX3YyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g5YWo5bGA5Y+Y6YePOlxudmFyIHByZWZpeCA9ICdodHRwOi8vMTAuMTI0LjE4LjExNTo4MDgwLyc7XG52YXIgcGF0aCA9ICdhcGkvdjEvYWN0aXZpdHkvd29ybGRjdXAvJztcbnZhciB1dWlkO1xudmFyIHJlcVVybCA9ICcuLi9hcGkuanNvbic7IC8vIOacrOWcsOS4tOaXtua1i+ivleeUqFxudmFyIHZvdGVUZWFtO1xudmFyIGNhcmRzID0ge1xuICBkYXRlXzE6IFtdLFxuICBkYXRlXzI6IFtdLFxuICBkYXRlXzM6IFtdLFxuICBkYXRlXzQ6IFtdLFxuICBkYXRlXzU6IFtdXG59O1xuY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG5jb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcbmxldCBkYXRlU3RyaW5nXzE7XG5sZXQgZGF0ZVN0cmluZ18yO1xubGV0IGRhdGVTdHJpbmdfMztcbmxldCBkYXRlU3RyaW5nXzQ7XG5sZXQgZGF0ZVN0cmluZ181O1xuXG5cbi8vIOmAmueUqOWHveaVsOS7rDpcbi8vIDEuIGFqYXggZ2V0JnBvc3QgZnVuY3Rpb25zXG5jb25zdCBhamF4R2V0ID0gKHVybCwgc3VjY2Vzc19jYiwgZmFpbF9jYikgPT4ge1xuICAkLmFqYXgoe1xuICAgIHR5cGU6ICdHRVQnLFxuICAgIHVybDogdXJsLFxuICAgIGRhdGFUeXBlOiAnanNvbidcbiAgfSlcbiAgLmRvbmUoKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSA9PiB7XG4gICAgc3VjY2Vzc19jYihkYXRhKTtcbiAgfSlcbiAgLmZhaWwoKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgPT4ge1xuICAgIGZhaWxfY2IoZXJyb3JUaHJvd24pO1xuICB9KTtcbn07XG5jb25zdCBhamF4UG9zdCA9ICh1cmwsIGRhdGEsIHN1Y2Nlc3NfY2IsIGZhaWxfY2IpID0+IHtcbiAgJC5hamF4KHtcbiAgICB0eXBlOiAnUE9TVCcsXG4gICAgdXJsOiB1cmwsXG4gICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnLFxuICAgIGRhdGE6IGRhdGFcbiAgfSlcbiAgLmRvbmUoKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSA9PiB7XG4gICAgc3VjY2Vzc19jYihkYXRhKTtcbiAgfSlcbiAgLmZhaWwoKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgPT4ge1xuICAgIGZhaWxfY2IoZXJyb3JUaHJvd24pO1xuICB9KTtcbn07XG5cbi8vIDIuIOeUn+aIkCBodG1sIOe7hOS7tlxuY29uc3QgY3JlYXRlSHRtbFAgPSAodGV4dCwgc3R5bGUgPSB1bmRlZmluZWQpID0+IHtcbiAgaWYoc3R5bGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAkKCc8cD4nICsgdGV4dCArICc8L3A+Jyk7XG4gIH1cblxuICAvLyDlpoLmnpzmnInmoLflvI/kvKDlhaXvvIzliqDkuIrmoLflvI9cbiAgdmFyIHN0eWxlcyA9ICcnO1xuICBmb3IodmFyIGtleSBpbiBzdHlsZSkge1xuICAgIHN0eWxlcyA9IHN0eWxlcyArIGtleSArICc6JyArIHN0eWxlW2tleV0gKyAnOyc7XG4gIH1cbiAgcmV0dXJuICQoJzxwIHN0eWxlPVwiJyArIHN0eWxlcyArICdcIj4nICsgdGV4dCArICc8L3A+Jyk7XG59O1xuY29uc3QgY3JlYXRlSHRtbEltZyA9IChzcmMsIGFsdCkgPT4ge1xuICByZXR1cm4gJCgnPGltZyBhbHQ9XCInICsgYWx0ICsgJ1wiIHNyYz1cIicgKyBzcmMgKyAnXCIgLz4nKTtcbn07XG5jb25zdCBjcmVhdGVIdG1sQnV0dG9uID0gKHRleHQsIHRlYW0sIHV1aWQpID0+IHtcbiAgcmV0dXJuICQoJzxidXR0b24gZGF0YS10ZWFtPVwiJyArIHRlYW0gKyAnXCIgZGF0YS11dWlkPVwiJyArIHV1aWQgKyAnXCI+JyArIHRleHQgKyAnPC9idXR0b24+Jyk7XG59O1xuY29uc3QgY3JlYXRlSHRtbERpdiA9IChsaXN0T2ZFbGVtZW50cywgZGl2Q2xhc3NOYW1lKSA9PiB7XG4gIHZhciB0ZW1wRGl2ID0gJCgnPGRpdiBjbGFzcz1cIicgKyBkaXZDbGFzc05hbWUgKyAnXCI+JyArICc8L2Rpdj4nKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0T2ZFbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGxpc3RPZkVsZW1lbnRzW2ldLmFwcGVuZFRvKHRlbXBEaXYpO1xuICB9XG4gIHJldHVybiB0ZW1wRGl2O1xufTtcblxuLy8gMy4g5Yqo5oCB55Sf5oiQ5LiA5Liq5q+U6LWb5a+56Zi15Y2hXG5jb25zdCBjcmVhdGVIdG1sR2FtZUNhcmQgPSAoXG4gIGhvc3ROYW1lLFxuICBob3N0TmFtZUNOLFxuICBndWVzdE5hbWUsXG4gIGd1ZXN0TmFtZUNOLFxuICB0aW1lLFxuICB1dWlkXG4pID0+IHtcbiAgY29uc3QgaG9zdFRpdGxlID0gY3JlYXRlSHRtbFAoaG9zdE5hbWVDTik7XG4gIC8vIGNvbnN0IGhvc3RGbGFnID0gY3JlYXRlSHRtbEltZygnLi9pbWFnZXMvJyArIGhvc3ROYW1lICsgJy5wbmcnLCAnaG9zdEZMYWcnKTtcbiAgY29uc3QgaG9zdEZsYWcgPSBjcmVhdGVIdG1sSW1nKCcuL2ltYWdlcy9mcmVuY2gucG5nJywgJ2hvc3RGTGFnJyk7XG4gIGNvbnN0IGhvc3RWb3RlQnV0dG9uID0gY3JlYXRlSHRtbEJ1dHRvbign54K55Ye75oqV56WoJywgaG9zdE5hbWUsIHV1aWQpO1xuICBjb25zdCBndWVzdFRpdGxlID0gY3JlYXRlSHRtbFAoZ3Vlc3ROYW1lQ04pO1xuICAvLyBjb25zdCBndWVzdEZsYWcgPSBjcmVhdGVIdG1sSW1nKCcuL2ltYWdlcy8nICsgZ3Vlc3ROYW1lICsgJy5wbmcnLCAnZ3Vlc3RGTGFnJyk7XG4gIGNvbnN0IGd1ZXN0RmxhZyA9IGNyZWF0ZUh0bWxJbWcoJy4vaW1hZ2VzL3JvbWFuaWEucG5nJywgJ2d1ZXN0RkxhZycpO1xuICBjb25zdCBndWVzdFZvdGVCdXR0b24gPSBjcmVhdGVIdG1sQnV0dG9uKCfngrnlh7vmipXnpagnLCBndWVzdE5hbWUsIHV1aWQpO1xuICBjb25zdCBsZWZ0RGl2ID0gY3JlYXRlSHRtbERpdihbaG9zdFRpdGxlLCBob3N0RmxhZywgaG9zdFZvdGVCdXR0b25dLCAncGFnZTAtZ2FtZWNhcmQtbGVmdCcpO1xuICBjb25zdCBtaWREaXYgPSBjcmVhdGVIdG1sRGl2KFtjcmVhdGVIdG1sUCgndnMnKSwgY3JlYXRlSHRtbFAodGltZSldLCAncGFnZTAtZ2FtZWNhcmQtbWlkJyk7XG4gIGNvbnN0IHJpZ2h0RGl2ID0gY3JlYXRlSHRtbERpdihbZ3Vlc3RUaXRsZSwgZ3Vlc3RGbGFnLCBndWVzdFZvdGVCdXR0b25dLCAncGFnZTAtZ2FtZWNhcmQtcmlnaHQnKTtcbiAgY29uc3QgY2FyZERpdiA9IGNyZWF0ZUh0bWxEaXYoW2xlZnREaXYsIG1pZERpdiwgcmlnaHREaXZdLCAncGFnZTAtdGltZXRhYmxlLWdhbWUnKTtcblxuICByZXR1cm4gY2FyZERpdjtcbn07XG5cbi8vIDQuIOa3u+WKoOaIluWIoOmZpCDmn5DkuIDlpKnnmoTmr5TotZvljaHniYdcbmNvbnN0IGFkZEdhbWVDYXJkc09uT25lRGF5SW5IdG1sID0gKGNhcmRzT25PbmVEYXkpID0+IHtcbiAgZm9yKGxldCBpIGluIGNhcmRzT25PbmVEYXkpIHtcbiAgICBjYXJkc09uT25lRGF5W2ldLmFkZENsYXNzKCdhbmltYXRlZCBmbGlwSW5YJyk7XG4gICAgJCgnLnBhZ2UwLXRpbWV0YWJsZScpLmFwcGVuZChjYXJkc09uT25lRGF5W2ldKTtcbiAgfVxuICAvLyDnu5nmipXnpajmjInpkq7mt7vliqBjbGlja+S6i+S7tuebkeWQrFxuICAkKCcucGFnZTAtdGltZXRhYmxlLWdhbWUgYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZvdGVUZWFtID0gdGhpcy5kYXRhc2V0LnRlYW07XG4gICAgdXVpZCA9IHRoaXMuZGF0YXNldC51dWlkO1xuICAgICQoJyNteU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgfSk7XG59O1xuY29uc3QgcmVtb3ZlR2FtZUNhcmRzT25PbmVEYXlJbkh0bWwgPSAoY2FyZHNPbk9uZURheSkgPT4ge1xuICBmb3IobGV0IGkgaW4gY2FyZHNPbk9uZURheSkge1xuICAgIGNhcmRzT25PbmVEYXlbaV0ucmVtb3ZlQ2xhc3MoJ2ZsaXBJblgnKTtcbiAgICBjYXJkc09uT25lRGF5W2ldLnJlbW92ZSgpO1xuICB9XG59O1xuXG4vLyA1LiBhamF4IGNhbGxiYWNrIGZ1bmN0aW9uc1xuY29uc3QgZ2V0SW5mbyA9IChkYXRhKSA9PiB7XG4gIGNvbnNvbGUubG9nKGRhdGEpO1xuICAkKCcjZGF0ZV8xJykudGV4dChkYXRlU3RyaW5nXzEuc3Vic3RyaW5nKDUpKTtcbiAgJCgnI2RhdGVfMicpLnRleHQoZGF0ZVN0cmluZ18yLnN1YnN0cmluZyg1KSk7XG4gICQoJyNkYXRlXzMnKS50ZXh0KGRhdGVTdHJpbmdfMy5zdWJzdHJpbmcoNSkpO1xuICAkKCcjZGF0ZV80JykudGV4dChkYXRlU3RyaW5nXzQuc3Vic3RyaW5nKDUpKTtcbiAgJCgnI2RhdGVfNScpLnRleHQoZGF0ZVN0cmluZ181LnN1YnN0cmluZyg1KSk7XG5cbiAgLy8g5bCG5Y2h54mH5a2Y5YKo5LqOY2FyZHNcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmRhdGEucmFjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhLmRhdGEucmFjZXNbaV0ubWV0YS5zdGFydEF0LnNwbGl0KCcgJylbMF0pO1xuICAgIHZhciByYWNlID0gZGF0YS5kYXRhLnJhY2VzW2ldO1xuICAgIHZhciB0ZW1wQ2FyZCA9IGNyZWF0ZUh0bWxHYW1lQ2FyZChcbiAgICAgIHJhY2UuaG9zdC5uYW1lLFxuICAgICAgcmFjZS5ob3N0Lm5hbWVDTixcbiAgICAgIHJhY2UuZ3Vlc3QubmFtZSxcbiAgICAgIHJhY2UuZ3Vlc3QubmFtZUNOLFxuICAgICAgcmFjZS5tZXRhLnN0YXJ0QXQuc3BsaXQoJyAnKVsxXS5zdWJzdHJpbmcoMCwgNSksXG4gICAgICByYWNlLnV1aWRcbiAgICApO1xuICAgIHN3aXRjaCAoZGF0YS5kYXRhLnJhY2VzW2ldLm1ldGEuc3RhcnRBdC5zcGxpdCgnICcpWzBdKSB7XG4gICAgICBjYXNlIGRhdGVTdHJpbmdfMTpcbiAgICAgICAgY2FyZHMuZGF0ZV8xLnB1c2godGVtcENhcmQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgZGF0ZVN0cmluZ18yOlxuICAgICAgICBjYXJkcy5kYXRlXzIucHVzaCh0ZW1wQ2FyZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBkYXRlU3RyaW5nXzM6XG4gICAgICAgIGNhcmRzLmRhdGVfMy5wdXNoKHRlbXBDYXJkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGRhdGVTdHJpbmdfNDpcbiAgICAgICAgY2FyZHMuZGF0ZV80LnB1c2godGVtcENhcmQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgZGF0ZVN0cmluZ181OlxuICAgICAgICBjYXJkcy5kYXRlXzUucHVzaCh0ZW1wQ2FyZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8g5Li65rKh5pyJ6LWb5LqL55qEZGF0Zea3u+WKoOaXoOi1m+S6i+WNoeeJh1xuICBmb3IodmFyIGkgaW4gY2FyZHMpIHtcbiAgICBpZihjYXJkc1tpXS5sZW5ndGggPT0gMCkge1xuICAgICAgY2FyZHNbaV0ucHVzaChjcmVhdGVIdG1sUCgn5peg6LWb5LqLJywge1xuICAgICAgICAnd2lkdGgnOiAnMTAwJScsXG4gICAgICAgICdmb250LXNpemUnOiAnMnJlbScsXG4gICAgICAgICd0ZXh0LWFsaWduJzogJ2NlbnRlcidcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cbiAgLy8g6buY6K6k5Li65LuK5aSp55qE5q+U6LWbXG4gIGFkZEdhbWVDYXJkc09uT25lRGF5SW5IdG1sKGNhcmRzLmRhdGVfMyk7XG59O1xuY29uc3QgcG9zdFBob25lTnVtYmVyID0gKGRhdGEpID0+IHtcbiAgaWYoZGF0YS5lcnJjb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAkKCcjd3JvbmdNc2cnKS50ZXh0KCflj4LkuI7miJDlip/vvIEnKTtcbiAgICAkKCcjd3JvbmdNc2cnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICAvLyDmipXnpajmiJDlip/lkI7vvIzov4fkuKTnp5LlhbPpl61tb2RhbOeql+WPo1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgJCgnI3dyb25nTXNnJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICQoJyNteU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICB9LCAyMDAwKTtcbiAgICAvLyDmlLnlj5jlt7LmipXlnLrmrKHnmoTmjInpkq7moLflvI/vvIzlubZkaXNhYmxlZOaMiemSrlxuICAgICQoJy5wYWdlMC10aW1ldGFibGUtZ2FtZSBidXR0b24nKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YXNldC51dWlkKTtcbiAgICAgIGlmKHRoaXMuZGF0YXNldC51dWlkID09IHV1aWQpIHtcbiAgICAgICAgJCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICcjOTVhNWE2Jyk7XG4gICAgICAgICQodGhpcykudGV4dCgn5bey5oqV56WoJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGVycm9yTXNnO1xuICAgIHN3aXRjaCAoZGF0YS5lcnJjb2RlKSB7XG4gICAgICBjYXNlIDQwMDcxNzpcbiAgICAgICAgZXJyb3JNc2cgPSBcIuaKleelqOW3suaIquatou+8gVwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDAwNzE4OlxuICAgICAgICBlcnJvck1zZyA9IFwi5Y+R55Sf6ZSZ6K+v77yM6K+36YeN5paw6L6T5YWl77yBXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0MDA3MTk6XG4gICAgICAgIGVycm9yTXNnID0gXCLmiYvmnLrlj7fnoIHplJnor6/vvIFcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQwMDcyMDpcbiAgICAgICAgZXJyb3JNc2cgPSBcIuWPkeeUn+mUmeivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDAwNzIxOlxuICAgICAgICBlcnJvck1zZyA9IFwi5q2k5omL5py65Y+35bey5oqV6L+H56Wo5LqG5ZOm77yBXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZXJyb3JNc2cgPSBcIuWPkeeUn+acquefpemUmeivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbn07XG5jb25zdCBoYW5kbGVBamF4RmFpbCA9IChlcnJvclRocm93bikgPT4ge1xuICAvLyBUT0RPIOWPr+eUqOi/m+W6puadoeabv+S7o1xufTtcblxuXG4vLyAqKioqKioqKioqKlxuLy8gKirnqIvluo/lvIDlp4sqKlxuLy8gKioqKioqKioqKipcbihmdW5jdGlvbigpIHtcbiAgYWpheEdldChyZXFVcmwsIGdldEluZm8sIGhhbmRsZUFqYXhGYWlsKTtcblxuICAvLyDorr7nva415aSp55qE5pe26Ze0c3RyaW5n77yM55So5LqO5Yik5pat5q+U6LWb5pel5pyfXG4gIHN3aXRjaCAoZGF5KSB7XG4gICAgY2FzZSAyOTpcbiAgICAgIGRhdGVTdHJpbmdfMSA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheS0yKS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ18yID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF5LTEpLnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzMgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIGRheS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ180ID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF5KzEpLnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzUgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMikudG9TdHJpbmcoKSArICctJyArICcxJztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzA6XG4gICAgICBkYXRlU3RyaW5nXzEgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXktMikudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfMiA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheS0xKS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ18zID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyBkYXkudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfNCA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsyKS50b1N0cmluZygpICsgJy0nICsgJzEnO1xuICAgICAgZGF0ZVN0cmluZ181ID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzIpLnRvU3RyaW5nKCkgKyAnLScgKyAnMic7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBkYXRlU3RyaW5nXzEgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkpLnRvU3RyaW5nKCkgKyAnLScgKyAnMjknO1xuICAgICAgZGF0ZVN0cmluZ18yID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKS50b1N0cmluZygpICsgJy0nICsgJzMwJztcbiAgICAgIGRhdGVTdHJpbmdfMyA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgZGF5LnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzQgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXkrMSkudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfNSA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheSsyKS50b1N0cmluZygpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgZGF0ZVN0cmluZ18xID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKS50b1N0cmluZygpICsgJy0nICsgJzMwJztcbiAgICAgIGRhdGVTdHJpbmdfMiA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheS0xKS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ18zID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyBkYXkudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfNCA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheSsxKS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ181ID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF5KzIpLnRvU3RyaW5nKCk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgZGF0ZVN0cmluZ18xID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF5LTIpLnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzIgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXktMSkudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfMyA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgZGF5LnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzQgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXkrMSkudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfNSA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheSsyKS50b1N0cmluZygpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICAvLyDnm5HlkKzml6XmnJ/moI/ngrnlh7vkuovku7bvvIzkuLrkuobliIfmjaLml6XmnJ/lkozmr5TotZvljaHniYdcbiAgJCgnLnBhZ2UwLWRhdGUnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgJCgnLnBhZ2UwLWRhdGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlLWRhdGUnKSkge1xuICAgICAgICByZW1vdmVHYW1lQ2FyZHNPbk9uZURheUluSHRtbChjYXJkc1skKHRoaXMpLmF0dHIoJ2lkJyldKTtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlLWRhdGUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUtZGF0ZScpO1xuICAgIGFkZEdhbWVDYXJkc09uT25lRGF5SW5IdG1sKGNhcmRzWyQodGhpcykuYXR0cignaWQnKV0pO1xuICB9KTtcblxuICAvLyDnm5HlkKzmipXnpahtb2RhbOahhuS6i+S7tlxuICAkKCcjam9pbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgcGhvbmVOdW1iZXIgPSAkKCcjdXNlclBob25lSW5wdXQnKS52YWwoKTtcbiAgICB2YXIgcGhvbmVOdW1iZXJSZWdFeHAgPSBuZXcgUmVnRXhwKCcoXigxM1xcXFxkfDE1W140LFxcXFxEXXwxN1sxMzY3OF18MThcXFxcZClcXFxcZHs4fXwxNzBbXjM0NixcXFxcRF1cXFxcZHs3fSkkJywgJ2cnKTtcbiAgICBpZighcGhvbmVOdW1iZXJSZWdFeHAudGVzdChwaG9uZU51bWJlcikpIHtcbiAgICAgICQoJyN3cm9uZ01zZycpLnRleHQoJ+aJi+acuuWPt+acieivr++8jOivt+mHjeivle+8gScpO1xuICAgICAgJCgnI3dyb25nTXNnJykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFqYXhQb3N0KFxuICAgICAgICBwcmVmaXggKyBwYXRoICsgdXVpZCxcbiAgICAgICAgJ3Bob25lPScgKyBwaG9uZU51bWJlciArICcmdGVhbT0nICsgdm90ZVRlYW0sXG4gICAgICAgIHBvc3RQaG9uZU51bWJlcixcbiAgICAgICAgaGFuZGxlQWpheEZhaWxcbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
