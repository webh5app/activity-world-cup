'use strict';

// 全局变量:
// var prefix = 'http://10.124.18.115:8080/';
var prefix = '/';
var path = 'api/v1/activity/worldcup/';

var uuid;
// var reqUrl = '../api.json'; // 本地临时测试用
var voteTeam;
var cards = {
  date_1: [],
  date_2: [],
  date_3: [],
  date_4: [],
  date_5: []
};
var date = new Date();
var day = date.getDate();
var dateString_1 = void 0;
var dateString_2 = void 0;
var dateString_3 = void 0;
var dateString_4 = void 0;
var dateString_5 = void 0;

// 通用函数们:
// 1. ajax get&post functions
var ajaxGet = function ajaxGet(url, success_cb, fail_cb) {
  $.ajax({
    type: 'GET',
    url: url,
    dataType: 'json'
  }).done(function (data, textStatus, jqXHR) {
    success_cb(data);
  }).fail(function (jqXHR, textStatus, errorThrown) {
    fail_cb(errorThrown);
  });
};
var ajaxPost = function ajaxPost(url, data, success_cb, fail_cb) {
  $.ajax({
    type: 'POST',
    url: url,
    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
    data: data
  }).done(function (data, textStatus, jqXHR) {
    success_cb(data);
  }).fail(function (jqXHR, textStatus, errorThrown) {
    fail_cb(errorThrown);
  });
};

// 2. 生成 html 组件
var createHtmlP = function createHtmlP(text) {
  var style = arguments.length <= 1 || arguments[1] === undefined ? undefined : arguments[1];

  if (style === undefined) {
    return $('<p>' + text + '</p>');
  }

  // 如果有样式传入，加上样式
  var styles = '';
  for (var key in style) {
    styles = styles + key + ':' + style[key] + ';';
  }
  return $('<p style="' + styles + '">' + text + '</p>');
};
var createHtmlImg = function createHtmlImg(src, alt) {
  return $('<img alt="' + alt + '" src="' + src + '" />');
};
var createHtmlButton = function createHtmlButton(text, team, uuid, expired) {
  if (expired) {
    var tempButton = $('<button data-team="' + team + '" data-uuid="' + uuid + '">已结束</button>');
    tempButton.attr('disabled', 'disabled');
    tempButton.css('background-color', '#95a5a6');
    return tempButton;
  }
  return $('<button data-team="' + team + '" data-uuid="' + uuid + '">' + text + '</button>');
};
var createHtmlDiv = function createHtmlDiv(listOfElements, divClassName) {
  var tempDiv = $('<div class="' + divClassName + '">' + '</div>');
  for (var i = 0; i < listOfElements.length; i++) {
    listOfElements[i].appendTo(tempDiv);
  }
  return tempDiv;
};

// 3. 动态生成一个比赛对阵卡
var createHtmlGameCard = function createHtmlGameCard(hostName, hostNameCN, hostFlag, guestName, guestNameCN, guestFlag, time, uuid, expired) {
  var hostTitleElement = createHtmlP(hostNameCN);
  // const hostFlag = createHtmlImg('./images/' + hostName + '.png', 'hostFLag');
  // const hostFlag = createHtmlImg('./images/' + hostName + '.jpg', 'hostFLag');
  var hostFlagElement = createHtmlImg(hostFlag, 'hostFLag');
  var hostVoteButtonElement = createHtmlButton('点击投票', hostName, uuid, expired);
  var guestTitleElement = createHtmlP(guestNameCN);
  // const guestFlag = createHtmlImg('./images/' + guestName + '.png', 'guestFLag');
  // const guestFlag = createHtmlImg('./images/' + guestName + '.jpg', 'guestFLag');
  var guestFlagElement = createHtmlImg(guestFlag, 'guestFLag');
  var guestVoteButtonElement = createHtmlButton('点击投票', guestName, uuid, expired);
  var leftDiv = createHtmlDiv([hostTitleElement, hostFlagElement, hostVoteButtonElement], 'page0-gamecard-left');
  var midDiv = createHtmlDiv([createHtmlP('vs'), createHtmlP(time)], 'page0-gamecard-mid');
  var rightDiv = createHtmlDiv([guestTitleElement, guestFlagElement, guestVoteButtonElement], 'page0-gamecard-right');
  var cardDiv = createHtmlDiv([leftDiv, midDiv, rightDiv], 'page0-timetable-game');

  return cardDiv;
};

// 4. 添加或删除 某一天的比赛卡片
var addGameCardsOnOneDayInHtml = function addGameCardsOnOneDayInHtml(cardsOnOneDay) {
  for (var i in cardsOnOneDay) {
    cardsOnOneDay[i].addClass('animated flipInX');
    $('.page0-timetable').append(cardsOnOneDay[i]);
  }
  // 给投票按钮添加click事件监听
  $('.page0-timetable-game button').on('click', function (event) {
    event.preventDefault();
    voteTeam = this.dataset.team;
    uuid = this.dataset.uuid;
    $('#wrongMsg').css('display', 'none');
    $('#myModal').modal('show');
  });
};
var removeGameCardsOnOneDayInHtml = function removeGameCardsOnOneDayInHtml(cardsOnOneDay) {
  for (var i in cardsOnOneDay) {
    cardsOnOneDay[i].removeClass('flipInX');
    cardsOnOneDay[i].remove();
  }
};

var preloadFiles = function preloadFiles() {
  var css_uefa = document.createElement('link');
  css_uefa.type = "text/css";
  css_uefa.rel = "stylesheet";
  css_uefa.href = "/css/uefa.css";

  var css_animate = document.createElement('link');
  css_animate.type = "text/css";
  css_animate.rel = "stylesheet";
  css_animate.href = "/css/animate.min.css";

  var js_bootstrap = document.createElement("script");
  js_bootstrap.type = "text/javascript";
  js_bootstrap.src = "/js/bootstrap.min.js";

  $('head').first().append(css_animate);
  $('head').first().append(css_uefa);
  $('html').first().append(js_bootstrap);

  $('#football').append(createHtmlImg('//ooo.0o0.ooo/2016/06/15/57622df0744e3.png', 'football'));
  $('#logo').append(createHtmlImg('//ooo.0o0.ooo/2016/06/15/57622884e73bb.png', 'logo'));
};

// 5. ajax callback functions
var getInfo = function getInfo(data) {
  // 异步加载其它 js、css和图片
  preloadFiles();
  changeProgressBarValue(70);

  // console.log(data);
  $('#date_1').text(dateString_1.substring(5));
  $('#date_2').text(dateString_2.substring(5));
  $('#date_3').text(dateString_3.substring(5));
  $('#date_4').text(dateString_4.substring(5));
  $('#date_5').text(dateString_5.substring(5));

  $('#modal-close').attr('href', data.data.races[0].register_url);
  $('title').first().text(data.data.title);

  // 将卡片存储于cards
  for (var i = 0; i < data.data.races.length; i++) {
    var race = data.data.races[i];
    // console.log(race.host.flag);
    var expired = race.meta.expired; // 比赛是否过期
    var tempCard = createHtmlGameCard(race.host.name, race.host.nameCN, race.host.flag, race.guest.name, race.guest.nameCN, race.guest.flag, race.meta.startAt.split(' ')[1].substring(0, 5), race.uuid, expired);
    switch (data.data.races[i].meta.startAt.split(' ')[0]) {
      case dateString_1:
        cards.date_1.push(tempCard);
        break;
      case dateString_2:
        cards.date_2.push(tempCard);
        break;
      case dateString_3:
        cards.date_3.push(tempCard);
        break;
      case dateString_4:
        cards.date_4.push(tempCard);
        break;
      case dateString_5:
        cards.date_5.push(tempCard);
        break;
      default:
        break;
    }
  }

  // 为没有赛事的date添加无赛事卡片
  for (var i in cards) {
    if (cards[i].length == 0) {
      cards[i].push(createHtmlP('无赛事', {
        'width': '100%',
        'color': '#fff',
        'font-size': '2rem',
        'text-align': 'center'
      }));
    }
  }
  // 默认为今天的比赛
  addGameCardsOnOneDayInHtml(cards.date_3);
  changeProgressBarValue(100);

  // 加载完毕后停顿1s，再显示content，防止意外发生，显示也更流畅
  window.setTimeout(function () {
    loadEnd();
  }, 1000);
};
var postPhoneNumber = function postPhoneNumber(data) {
  if (data.errcode === undefined) {
    $('#wrongMsg').text('参与成功！');
    $('#wrongMsg').css('display', 'block');
    // 投票成功后，过两秒关闭modal窗口
    window.setTimeout(function () {
      $('#wrongMsg').css('display', 'none');
      $('#myModal').modal('hide');
    }, 2000);
    // 改变已投场次的按钮样式，并disabled按钮
    $('.page0-timetable-game button').each(function (i) {
      if (this.dataset.uuid === uuid) {
        $(this).attr('disabled', 'disabled');
        if (voteTeam === this.dataset.team) {
          $(this).css('background-color', '#e74c3c');
        } else {
          $(this).css('background-color', '#95a5a6');
        }
        $(this).text('已投票');
      }
    });
  } else {
    var errorMsg;
    switch (data.errcode) {
      case 400717:
        errorMsg = "投票已截止！";
        break;
      case 400718:
        errorMsg = "发生错误，请重新输入！";
        break;
      case 400719:
        errorMsg = "手机号码错误！";
        break;
      case 400720:
        errorMsg = "发生错误，请重新输入！";
        break;
      case 400721:
        errorMsg = "此手机号已投过票了哦！";
        break;
      default:
        errorMsg = "发生未知错误，请重新输入！";
        break;
    }
    // console.log(errorMsg);
    $('#wrongMsg').text(errorMsg);
    $('#wrongMsg').css('display', 'block');
  }
};
var handleAjaxFail = function handleAjaxFail(errorThrown) {
  // TODO
};

// 6. 加载完成，显示内容
var loadEnd = function loadEnd() {
  $('.progress-wrapper').css('display', 'none');
  $('.container-wrapper').css('display', 'block');
};
var changeProgressBarValue = function changeProgressBarValue(value) {
  var tempVal = value.toString();
  $('.progress-bar').attr('aria-valuenow', tempVal);
  $('.progress-bar').css('width', tempVal + '%');
};

// ***********
// **程序开始**
// ***********
$(function () {
  ajaxGet(prefix + path, getInfo, handleAjaxFail);

  // 设置5天的时间string，用于判断比赛日期
  switch (day) {
    case 29:
      dateString_1 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 2).toString();
      dateString_2 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 1).toString();
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 1).toString();
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 2).toString() + '-' + '1';
      break;
    case 30:
      dateString_1 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 2).toString();
      dateString_2 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 1).toString();
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 2).toString() + '-' + '1';
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 2).toString() + '-' + '2';
      break;
    case 1:
      dateString_1 = date.getFullYear().toString() + '-' + date.getMonth().toString() + '-' + '29';
      dateString_2 = date.getFullYear().toString() + '-' + date.getMonth().toString() + '-' + '30';
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 1).toString();
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 2).toString();
      break;
    case 2:
      dateString_1 = date.getFullYear().toString() + '-' + date.getMonth().toString() + '-' + '30';
      dateString_2 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 1).toString();
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 1).toString();
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 2).toString();
      break;
    default:
      dateString_1 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 2).toString();
      dateString_2 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day - 1).toString();
      dateString_3 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + day.toString();
      dateString_4 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 1).toString();
      dateString_5 = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString() + '-' + (day + 2).toString();
      break;
  }

  // 监听日期栏点击事件，为了切换日期和比赛卡片
  $('.page0-date').on('click', function (event) {
    event.preventDefault();
    $('.page0-date').each(function () {
      if ($(this).hasClass('active-date')) {
        removeGameCardsOnOneDayInHtml(cards[$(this).attr('id')]);
        $(this).removeClass('active-date');
      }
    });
    $(this).addClass('active-date');
    addGameCardsOnOneDayInHtml(cards[$(this).attr('id')]);
  });

  // 监听投票modal框事件
  $('#join').on('click', function (event) {
    event.preventDefault();
    var phoneNumber = $('#userPhoneInput').val();
    var phoneNumberRegExp = new RegExp('(^(13\\d|15[^4,\\D]|17[13678]|18\\d)\\d{8}|170[^346,\\D]\\d{7})$', 'g');
    if (!phoneNumberRegExp.test(phoneNumber)) {
      $('#wrongMsg').text('手机号有误，请重试！');
      $('#wrongMsg').css('display', 'block');
    } else {
      ajaxPost(prefix + path + uuid + '/', 'phone=' + phoneNumber + '&team=' + voteTeam, postPhoneNumber, handleAjaxFail);
    }
  });
});
//# sourceMappingURL=data:application/json;base64,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QUlFLGNBSkY7QUFNRDtBQUNGLEdBZkQ7QUFnQkQsQ0F4RUQiLCJmaWxlIjoidWVmYV92Mi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOWFqOWxgOWPmOmHjzpcbi8vIHZhciBwcmVmaXggPSAnaHR0cDovLzEwLjEyNC4xOC4xMTU6ODA4MC8nO1xudmFyIHByZWZpeCA9ICcvJztcbnZhciBwYXRoID0gJ2FwaS92MS9hY3Rpdml0eS93b3JsZGN1cC8nO1xuXG52YXIgdXVpZDtcbi8vIHZhciByZXFVcmwgPSAnLi4vYXBpLmpzb24nOyAvLyDmnKzlnLDkuLTml7bmtYvor5XnlKhcbnZhciB2b3RlVGVhbTtcbnZhciBjYXJkcyA9IHtcbiAgZGF0ZV8xOiBbXSxcbiAgZGF0ZV8yOiBbXSxcbiAgZGF0ZV8zOiBbXSxcbiAgZGF0ZV80OiBbXSxcbiAgZGF0ZV81OiBbXVxufTtcbmNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG5sZXQgZGF0ZVN0cmluZ18xO1xubGV0IGRhdGVTdHJpbmdfMjtcbmxldCBkYXRlU3RyaW5nXzM7XG5sZXQgZGF0ZVN0cmluZ180O1xubGV0IGRhdGVTdHJpbmdfNTtcblxuXG4vLyDpgJrnlKjlh73mlbDku6w6XG4vLyAxLiBhamF4IGdldCZwb3N0IGZ1bmN0aW9uc1xuY29uc3QgYWpheEdldCA9ICh1cmwsIHN1Y2Nlc3NfY2IsIGZhaWxfY2IpID0+IHtcbiAgJC5hamF4KHtcbiAgICB0eXBlOiAnR0VUJyxcbiAgICB1cmw6IHVybCxcbiAgICBkYXRhVHlwZTogJ2pzb24nXG4gIH0pXG4gIC5kb25lKChkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikgPT4ge1xuICAgIHN1Y2Nlc3NfY2IoZGF0YSk7XG4gIH0pXG4gIC5mYWlsKChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcbiAgICBmYWlsX2NiKGVycm9yVGhyb3duKTtcbiAgfSk7XG59O1xuY29uc3QgYWpheFBvc3QgPSAodXJsLCBkYXRhLCBzdWNjZXNzX2NiLCBmYWlsX2NiKSA9PiB7XG4gICQuYWpheCh7XG4gICAgdHlwZTogJ1BPU1QnLFxuICAgIHVybDogdXJsLFxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG4gIC5kb25lKChkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikgPT4ge1xuICAgIHN1Y2Nlc3NfY2IoZGF0YSk7XG4gIH0pXG4gIC5mYWlsKChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcbiAgICBmYWlsX2NiKGVycm9yVGhyb3duKTtcbiAgfSk7XG59O1xuXG4vLyAyLiDnlJ/miJAgaHRtbCDnu4Tku7ZcbmNvbnN0IGNyZWF0ZUh0bWxQID0gKHRleHQsIHN0eWxlID0gdW5kZWZpbmVkKSA9PiB7XG4gIGlmKHN0eWxlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJCgnPHA+JyArIHRleHQgKyAnPC9wPicpO1xuICB9XG5cbiAgLy8g5aaC5p6c5pyJ5qC35byP5Lyg5YWl77yM5Yqg5LiK5qC35byPXG4gIHZhciBzdHlsZXMgPSAnJztcbiAgZm9yKHZhciBrZXkgaW4gc3R5bGUpIHtcbiAgICBzdHlsZXMgPSBzdHlsZXMgKyBrZXkgKyAnOicgKyBzdHlsZVtrZXldICsgJzsnO1xuICB9XG4gIHJldHVybiAkKCc8cCBzdHlsZT1cIicgKyBzdHlsZXMgKyAnXCI+JyArIHRleHQgKyAnPC9wPicpO1xufTtcbmNvbnN0IGNyZWF0ZUh0bWxJbWcgPSAoc3JjLCBhbHQpID0+IHtcbiAgcmV0dXJuICQoJzxpbWcgYWx0PVwiJyArIGFsdCArICdcIiBzcmM9XCInICsgc3JjICsgJ1wiIC8+Jyk7XG59O1xuY29uc3QgY3JlYXRlSHRtbEJ1dHRvbiA9ICh0ZXh0LCB0ZWFtLCB1dWlkLCBleHBpcmVkKSA9PiB7XG4gIGlmKGV4cGlyZWQpIHtcbiAgICB2YXIgdGVtcEJ1dHRvbiA9ICQoJzxidXR0b24gZGF0YS10ZWFtPVwiJyArIHRlYW0gKyAnXCIgZGF0YS11dWlkPVwiJyArIHV1aWQgKyAnXCI+5bey57uT5p2fPC9idXR0b24+Jyk7XG4gICAgdGVtcEJ1dHRvbi5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgIHRlbXBCdXR0b24uY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyM5NWE1YTYnKTtcbiAgICByZXR1cm4gdGVtcEJ1dHRvbjtcbiAgfVxuICByZXR1cm4gJCgnPGJ1dHRvbiBkYXRhLXRlYW09XCInICsgdGVhbSArICdcIiBkYXRhLXV1aWQ9XCInICsgdXVpZCArICdcIj4nICsgdGV4dCArICc8L2J1dHRvbj4nKTtcbn07XG5jb25zdCBjcmVhdGVIdG1sRGl2ID0gKGxpc3RPZkVsZW1lbnRzLCBkaXZDbGFzc05hbWUpID0+IHtcbiAgdmFyIHRlbXBEaXYgPSAkKCc8ZGl2IGNsYXNzPVwiJyArIGRpdkNsYXNzTmFtZSArICdcIj4nICsgJzwvZGl2PicpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RPZkVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGlzdE9mRWxlbWVudHNbaV0uYXBwZW5kVG8odGVtcERpdik7XG4gIH1cbiAgcmV0dXJuIHRlbXBEaXY7XG59O1xuXG4vLyAzLiDliqjmgIHnlJ/miJDkuIDkuKrmr5TotZvlr7npmLXljaFcbmNvbnN0IGNyZWF0ZUh0bWxHYW1lQ2FyZCA9IChcbiAgaG9zdE5hbWUsXG4gIGhvc3ROYW1lQ04sXG4gIGhvc3RGbGFnLFxuICBndWVzdE5hbWUsXG4gIGd1ZXN0TmFtZUNOLFxuICBndWVzdEZsYWcsXG4gIHRpbWUsXG4gIHV1aWQsXG4gIGV4cGlyZWRcbikgPT4ge1xuICBjb25zdCBob3N0VGl0bGVFbGVtZW50ID0gY3JlYXRlSHRtbFAoaG9zdE5hbWVDTik7XG4gIC8vIGNvbnN0IGhvc3RGbGFnID0gY3JlYXRlSHRtbEltZygnLi9pbWFnZXMvJyArIGhvc3ROYW1lICsgJy5wbmcnLCAnaG9zdEZMYWcnKTtcbiAgLy8gY29uc3QgaG9zdEZsYWcgPSBjcmVhdGVIdG1sSW1nKCcuL2ltYWdlcy8nICsgaG9zdE5hbWUgKyAnLmpwZycsICdob3N0RkxhZycpO1xuICBjb25zdCBob3N0RmxhZ0VsZW1lbnQgPSBjcmVhdGVIdG1sSW1nKGhvc3RGbGFnLCAnaG9zdEZMYWcnKTtcbiAgY29uc3QgaG9zdFZvdGVCdXR0b25FbGVtZW50ID0gY3JlYXRlSHRtbEJ1dHRvbign54K55Ye75oqV56WoJywgaG9zdE5hbWUsIHV1aWQsIGV4cGlyZWQpO1xuICBjb25zdCBndWVzdFRpdGxlRWxlbWVudCA9IGNyZWF0ZUh0bWxQKGd1ZXN0TmFtZUNOKTtcbiAgLy8gY29uc3QgZ3Vlc3RGbGFnID0gY3JlYXRlSHRtbEltZygnLi9pbWFnZXMvJyArIGd1ZXN0TmFtZSArICcucG5nJywgJ2d1ZXN0RkxhZycpO1xuICAvLyBjb25zdCBndWVzdEZsYWcgPSBjcmVhdGVIdG1sSW1nKCcuL2ltYWdlcy8nICsgZ3Vlc3ROYW1lICsgJy5qcGcnLCAnZ3Vlc3RGTGFnJyk7XG4gIGNvbnN0IGd1ZXN0RmxhZ0VsZW1lbnQgPSBjcmVhdGVIdG1sSW1nKGd1ZXN0RmxhZywgJ2d1ZXN0RkxhZycpO1xuICBjb25zdCBndWVzdFZvdGVCdXR0b25FbGVtZW50ID0gY3JlYXRlSHRtbEJ1dHRvbign54K55Ye75oqV56WoJywgZ3Vlc3ROYW1lLCB1dWlkLCBleHBpcmVkKTtcbiAgY29uc3QgbGVmdERpdiA9IGNyZWF0ZUh0bWxEaXYoW2hvc3RUaXRsZUVsZW1lbnQsIGhvc3RGbGFnRWxlbWVudCwgaG9zdFZvdGVCdXR0b25FbGVtZW50XSwgJ3BhZ2UwLWdhbWVjYXJkLWxlZnQnKTtcbiAgY29uc3QgbWlkRGl2ID0gY3JlYXRlSHRtbERpdihbY3JlYXRlSHRtbFAoJ3ZzJyksIGNyZWF0ZUh0bWxQKHRpbWUpXSwgJ3BhZ2UwLWdhbWVjYXJkLW1pZCcpO1xuICBjb25zdCByaWdodERpdiA9IGNyZWF0ZUh0bWxEaXYoW2d1ZXN0VGl0bGVFbGVtZW50LCBndWVzdEZsYWdFbGVtZW50LCBndWVzdFZvdGVCdXR0b25FbGVtZW50XSwgJ3BhZ2UwLWdhbWVjYXJkLXJpZ2h0Jyk7XG4gIGNvbnN0IGNhcmREaXYgPSBjcmVhdGVIdG1sRGl2KFtsZWZ0RGl2LCBtaWREaXYsIHJpZ2h0RGl2XSwgJ3BhZ2UwLXRpbWV0YWJsZS1nYW1lJyk7XG5cbiAgcmV0dXJuIGNhcmREaXY7XG59O1xuXG4vLyA0LiDmt7vliqDmiJbliKDpmaQg5p+Q5LiA5aSp55qE5q+U6LWb5Y2h54mHXG5jb25zdCBhZGRHYW1lQ2FyZHNPbk9uZURheUluSHRtbCA9IChjYXJkc09uT25lRGF5KSA9PiB7XG4gIGZvcihsZXQgaSBpbiBjYXJkc09uT25lRGF5KSB7XG4gICAgY2FyZHNPbk9uZURheVtpXS5hZGRDbGFzcygnYW5pbWF0ZWQgZmxpcEluWCcpO1xuICAgICQoJy5wYWdlMC10aW1ldGFibGUnKS5hcHBlbmQoY2FyZHNPbk9uZURheVtpXSk7XG4gIH1cbiAgLy8g57uZ5oqV56Wo5oyJ6ZKu5re75YqgY2xpY2vkuovku7bnm5HlkKxcbiAgJCgnLnBhZ2UwLXRpbWV0YWJsZS1nYW1lIGJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2b3RlVGVhbSA9IHRoaXMuZGF0YXNldC50ZWFtO1xuICAgIHV1aWQgPSB0aGlzLmRhdGFzZXQudXVpZDtcbiAgICAkKCcjd3JvbmdNc2cnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICQoJyNteU1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgfSk7XG59O1xuY29uc3QgcmVtb3ZlR2FtZUNhcmRzT25PbmVEYXlJbkh0bWwgPSAoY2FyZHNPbk9uZURheSkgPT4ge1xuICBmb3IobGV0IGkgaW4gY2FyZHNPbk9uZURheSkge1xuICAgIGNhcmRzT25PbmVEYXlbaV0ucmVtb3ZlQ2xhc3MoJ2ZsaXBJblgnKTtcbiAgICBjYXJkc09uT25lRGF5W2ldLnJlbW92ZSgpO1xuICB9XG59O1xuXG5jb25zdCBwcmVsb2FkRmlsZXMgPSAoKSA9PiB7XG4gIHZhciBjc3NfdWVmYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgY3NzX3VlZmEudHlwZSA9IFwidGV4dC9jc3NcIjtcbiAgY3NzX3VlZmEucmVsICA9IFwic3R5bGVzaGVldFwiO1xuICBjc3NfdWVmYS5ocmVmID0gXCIvY3NzL3VlZmEuY3NzXCI7XG5cbiAgdmFyIGNzc19hbmltYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICBjc3NfYW5pbWF0ZS50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuICBjc3NfYW5pbWF0ZS5yZWwgID0gXCJzdHlsZXNoZWV0XCI7XG4gIGNzc19hbmltYXRlLmhyZWYgPSBcIi9jc3MvYW5pbWF0ZS5taW4uY3NzXCI7XG5cbiAgdmFyIGpzX2Jvb3RzdHJhcCAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICBqc19ib290c3RyYXAudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG4gIGpzX2Jvb3RzdHJhcC5zcmMgID0gXCIvanMvYm9vdHN0cmFwLm1pbi5qc1wiO1xuXG4gICQoJ2hlYWQnKS5maXJzdCgpLmFwcGVuZChjc3NfYW5pbWF0ZSk7XG4gICQoJ2hlYWQnKS5maXJzdCgpLmFwcGVuZChjc3NfdWVmYSk7XG4gICQoJ2h0bWwnKS5maXJzdCgpLmFwcGVuZChqc19ib290c3RyYXApO1xuXG4gICQoJyNmb290YmFsbCcpLmFwcGVuZChjcmVhdGVIdG1sSW1nKCcvL29vby4wbzAub29vLzIwMTYvMDYvMTUvNTc2MjJkZjA3NDRlMy5wbmcnLCAnZm9vdGJhbGwnKSk7XG4gICQoJyNsb2dvJykuYXBwZW5kKGNyZWF0ZUh0bWxJbWcoJy8vb29vLjBvMC5vb28vMjAxNi8wNi8xNS81NzYyMjg4NGU3M2JiLnBuZycsICdsb2dvJykpO1xufTtcblxuLy8gNS4gYWpheCBjYWxsYmFjayBmdW5jdGlvbnNcbmNvbnN0IGdldEluZm8gPSAoZGF0YSkgPT4ge1xuICAvLyDlvILmraXliqDovb3lhbblroMganPjgIFjc3Plkozlm77niYdcbiAgcHJlbG9hZEZpbGVzKCk7XG4gIGNoYW5nZVByb2dyZXNzQmFyVmFsdWUoNzApO1xuXG4gIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xuICAkKCcjZGF0ZV8xJykudGV4dChkYXRlU3RyaW5nXzEuc3Vic3RyaW5nKDUpKTtcbiAgJCgnI2RhdGVfMicpLnRleHQoZGF0ZVN0cmluZ18yLnN1YnN0cmluZyg1KSk7XG4gICQoJyNkYXRlXzMnKS50ZXh0KGRhdGVTdHJpbmdfMy5zdWJzdHJpbmcoNSkpO1xuICAkKCcjZGF0ZV80JykudGV4dChkYXRlU3RyaW5nXzQuc3Vic3RyaW5nKDUpKTtcbiAgJCgnI2RhdGVfNScpLnRleHQoZGF0ZVN0cmluZ181LnN1YnN0cmluZyg1KSk7XG5cbiAgJCgnI21vZGFsLWNsb3NlJykuYXR0cignaHJlZicsIGRhdGEuZGF0YS5yYWNlc1swXS5yZWdpc3Rlcl91cmwpO1xuICAkKCd0aXRsZScpLmZpcnN0KCkudGV4dChkYXRhLmRhdGEudGl0bGUpO1xuXG4gIC8vIOWwhuWNoeeJh+WtmOWCqOS6jmNhcmRzXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5kYXRhLnJhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHJhY2UgPSBkYXRhLmRhdGEucmFjZXNbaV07XG4gICAgLy8gY29uc29sZS5sb2cocmFjZS5ob3N0LmZsYWcpO1xuICAgIHZhciBleHBpcmVkID0gcmFjZS5tZXRhLmV4cGlyZWQ7IC8vIOavlOi1m+aYr+WQpui/h+acn1xuICAgIHZhciB0ZW1wQ2FyZCA9IGNyZWF0ZUh0bWxHYW1lQ2FyZChcbiAgICAgIHJhY2UuaG9zdC5uYW1lLFxuICAgICAgcmFjZS5ob3N0Lm5hbWVDTixcbiAgICAgIHJhY2UuaG9zdC5mbGFnLFxuICAgICAgcmFjZS5ndWVzdC5uYW1lLFxuICAgICAgcmFjZS5ndWVzdC5uYW1lQ04sXG4gICAgICByYWNlLmd1ZXN0LmZsYWcsXG4gICAgICByYWNlLm1ldGEuc3RhcnRBdC5zcGxpdCgnICcpWzFdLnN1YnN0cmluZygwLCA1KSxcbiAgICAgIHJhY2UudXVpZCxcbiAgICAgIGV4cGlyZWRcbiAgICApO1xuICAgIHN3aXRjaCAoZGF0YS5kYXRhLnJhY2VzW2ldLm1ldGEuc3RhcnRBdC5zcGxpdCgnICcpWzBdKSB7XG4gICAgICBjYXNlIGRhdGVTdHJpbmdfMTpcbiAgICAgICAgY2FyZHMuZGF0ZV8xLnB1c2godGVtcENhcmQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgZGF0ZVN0cmluZ18yOlxuICAgICAgICBjYXJkcy5kYXRlXzIucHVzaCh0ZW1wQ2FyZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBkYXRlU3RyaW5nXzM6XG4gICAgICAgIGNhcmRzLmRhdGVfMy5wdXNoKHRlbXBDYXJkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGRhdGVTdHJpbmdfNDpcbiAgICAgICAgY2FyZHMuZGF0ZV80LnB1c2godGVtcENhcmQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgZGF0ZVN0cmluZ181OlxuICAgICAgICBjYXJkcy5kYXRlXzUucHVzaCh0ZW1wQ2FyZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8g5Li65rKh5pyJ6LWb5LqL55qEZGF0Zea3u+WKoOaXoOi1m+S6i+WNoeeJh1xuICBmb3IodmFyIGkgaW4gY2FyZHMpIHtcbiAgICBpZihjYXJkc1tpXS5sZW5ndGggPT0gMCkge1xuICAgICAgY2FyZHNbaV0ucHVzaChjcmVhdGVIdG1sUCgn5peg6LWb5LqLJywge1xuICAgICAgICAnd2lkdGgnOiAnMTAwJScsXG4gICAgICAgICdjb2xvcic6ICcjZmZmJyxcbiAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcycmVtJyxcbiAgICAgICAgJ3RleHQtYWxpZ24nOiAnY2VudGVyJ1xuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuICAvLyDpu5jorqTkuLrku4rlpKnnmoTmr5TotZtcbiAgYWRkR2FtZUNhcmRzT25PbmVEYXlJbkh0bWwoY2FyZHMuZGF0ZV8zKTtcbiAgY2hhbmdlUHJvZ3Jlc3NCYXJWYWx1ZSgxMDApO1xuXG4gIC8vIOWKoOi9veWujOavleWQjuWBnOmhvzFz77yM5YaN5pi+56S6Y29udGVudO+8jOmYsuatouaEj+WkluWPkeeUn++8jOaYvuekuuS5n+abtOa1geeVhVxuICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgbG9hZEVuZCgpO1xuICB9LCAxMDAwKTtcbn07XG5jb25zdCBwb3N0UGhvbmVOdW1iZXIgPSAoZGF0YSkgPT4ge1xuICBpZihkYXRhLmVycmNvZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICQoJyN3cm9uZ01zZycpLnRleHQoJ+WPguS4juaIkOWKn++8gScpO1xuICAgICQoJyN3cm9uZ01zZycpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgIC8vIOaKleelqOaIkOWKn+WQju+8jOi/h+S4pOenkuWFs+mXrW1vZGFs56qX5Y+jXG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkKCcjd3JvbmdNc2cnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgJCgnI215TW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgIH0sIDIwMDApO1xuICAgIC8vIOaUueWPmOW3suaKleWcuuasoeeahOaMiemSruagt+W8j++8jOW5tmRpc2FibGVk5oyJ6ZKuXG4gICAgJCgnLnBhZ2UwLXRpbWV0YWJsZS1nYW1lIGJ1dHRvbicpLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgaWYodGhpcy5kYXRhc2V0LnV1aWQgPT09IHV1aWQpIHtcbiAgICAgICAgJCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICBpZih2b3RlVGVhbSA9PT0gdGhpcy5kYXRhc2V0LnRlYW0pIHtcbiAgICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICcjZTc0YzNjJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAnIzk1YTVhNicpO1xuICAgICAgICB9XG4gICAgICAgICQodGhpcykudGV4dCgn5bey5oqV56WoJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGVycm9yTXNnO1xuICAgIHN3aXRjaCAoZGF0YS5lcnJjb2RlKSB7XG4gICAgICBjYXNlIDQwMDcxNzpcbiAgICAgICAgZXJyb3JNc2cgPSBcIuaKleelqOW3suaIquatou+8gVwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDAwNzE4OlxuICAgICAgICBlcnJvck1zZyA9IFwi5Y+R55Sf6ZSZ6K+v77yM6K+36YeN5paw6L6T5YWl77yBXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0MDA3MTk6XG4gICAgICAgIGVycm9yTXNnID0gXCLmiYvmnLrlj7fnoIHplJnor6/vvIFcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQwMDcyMDpcbiAgICAgICAgZXJyb3JNc2cgPSBcIuWPkeeUn+mUmeivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDAwNzIxOlxuICAgICAgICBlcnJvck1zZyA9IFwi5q2k5omL5py65Y+35bey5oqV6L+H56Wo5LqG5ZOm77yBXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZXJyb3JNc2cgPSBcIuWPkeeUn+acquefpemUmeivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coZXJyb3JNc2cpO1xuICAgICQoJyN3cm9uZ01zZycpLnRleHQoZXJyb3JNc2cpO1xuICAgICQoJyN3cm9uZ01zZycpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICB9XG59O1xuY29uc3QgaGFuZGxlQWpheEZhaWwgPSAoZXJyb3JUaHJvd24pID0+IHtcbiAgLy8gVE9ET1xufTtcblxuLy8gNi4g5Yqg6L295a6M5oiQ77yM5pi+56S65YaF5a65XG5jb25zdCBsb2FkRW5kID0gKCkgPT4ge1xuICAkKCcucHJvZ3Jlc3Mtd3JhcHBlcicpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICQoJy5jb250YWluZXItd3JhcHBlcicpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xufTtcbmNvbnN0IGNoYW5nZVByb2dyZXNzQmFyVmFsdWUgPSAodmFsdWUpID0+IHtcbiAgdmFyIHRlbXBWYWwgPSB2YWx1ZS50b1N0cmluZygpO1xuICAkKCcucHJvZ3Jlc3MtYmFyJykuYXR0cignYXJpYS12YWx1ZW5vdycsIHRlbXBWYWwpO1xuICAkKCcucHJvZ3Jlc3MtYmFyJykuY3NzKCd3aWR0aCcsIHRlbXBWYWwgKyAnJScpO1xufTtcblxuLy8gKioqKioqKioqKipcbi8vICoq56iL5bqP5byA5aeLKipcbi8vICoqKioqKioqKioqXG4kKGZ1bmN0aW9uKCkge1xuICBhamF4R2V0KHByZWZpeCtwYXRoLCBnZXRJbmZvLCBoYW5kbGVBamF4RmFpbCk7XG5cbiAgLy8g6K6+572uNeWkqeeahOaXtumXtHN0cmluZ++8jOeUqOS6juWIpOaWreavlOi1m+aXpeacn1xuICBzd2l0Y2ggKGRheSkge1xuICAgIGNhc2UgMjk6XG4gICAgICBkYXRlU3RyaW5nXzEgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXktMikudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfMiA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheS0xKS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ18zID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyBkYXkudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfNCA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheSsxKS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ181ID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzIpLnRvU3RyaW5nKCkgKyAnLScgKyAnMSc7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDMwOlxuICAgICAgZGF0ZVN0cmluZ18xID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF5LTIpLnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzIgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXktMSkudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfMyA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgZGF5LnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzQgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMikudG9TdHJpbmcoKSArICctJyArICcxJztcbiAgICAgIGRhdGVTdHJpbmdfNSA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsyKS50b1N0cmluZygpICsgJy0nICsgJzInO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgZGF0ZVN0cmluZ18xID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKS50b1N0cmluZygpICsgJy0nICsgJzI5JztcbiAgICAgIGRhdGVTdHJpbmdfMiA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSkudG9TdHJpbmcoKSArICctJyArICczMCc7XG4gICAgICBkYXRlU3RyaW5nXzMgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIGRheS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ180ID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF5KzEpLnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzUgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXkrMikudG9TdHJpbmcoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGRhdGVTdHJpbmdfMSA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSkudG9TdHJpbmcoKSArICctJyArICczMCc7XG4gICAgICBkYXRlU3RyaW5nXzIgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXktMSkudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfMyA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgZGF5LnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzQgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXkrMSkudG9TdHJpbmcoKTtcbiAgICAgIGRhdGVTdHJpbmdfNSA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheSsyKS50b1N0cmluZygpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGRhdGVTdHJpbmdfMSA9IGRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgJy0nICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpICsgJy0nICsgKGRheS0yKS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ18yID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF5LTEpLnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzMgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIGRheS50b1N0cmluZygpO1xuICAgICAgZGF0ZVN0cmluZ180ID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF0ZS5nZXRNb250aCgpKzEpLnRvU3RyaW5nKCkgKyAnLScgKyAoZGF5KzEpLnRvU3RyaW5nKCk7XG4gICAgICBkYXRlU3RyaW5nXzUgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArICctJyArIChkYXRlLmdldE1vbnRoKCkrMSkudG9TdHJpbmcoKSArICctJyArIChkYXkrMikudG9TdHJpbmcoKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgLy8g55uR5ZCs5pel5pyf5qCP54K55Ye75LqL5Lu277yM5Li65LqG5YiH5o2i5pel5pyf5ZKM5q+U6LWb5Y2h54mHXG4gICQoJy5wYWdlMC1kYXRlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoJy5wYWdlMC1kYXRlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGlmKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZS1kYXRlJykpIHtcbiAgICAgICAgcmVtb3ZlR2FtZUNhcmRzT25PbmVEYXlJbkh0bWwoY2FyZHNbJCh0aGlzKS5hdHRyKCdpZCcpXSk7XG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1kYXRlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlLWRhdGUnKTtcbiAgICBhZGRHYW1lQ2FyZHNPbk9uZURheUluSHRtbChjYXJkc1skKHRoaXMpLmF0dHIoJ2lkJyldKTtcbiAgfSk7XG5cbiAgLy8g55uR5ZCs5oqV56WobW9kYWzmoYbkuovku7ZcbiAgJCgnI2pvaW4nKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIHBob25lTnVtYmVyID0gJCgnI3VzZXJQaG9uZUlucHV0JykudmFsKCk7XG4gICAgdmFyIHBob25lTnVtYmVyUmVnRXhwID0gbmV3IFJlZ0V4cCgnKF4oMTNcXFxcZHwxNVteNCxcXFxcRF18MTdbMTM2NzhdfDE4XFxcXGQpXFxcXGR7OH18MTcwW14zNDYsXFxcXERdXFxcXGR7N30pJCcsICdnJyk7XG4gICAgaWYoIXBob25lTnVtYmVyUmVnRXhwLnRlc3QocGhvbmVOdW1iZXIpKSB7XG4gICAgICAkKCcjd3JvbmdNc2cnKS50ZXh0KCfmiYvmnLrlj7fmnInor6/vvIzor7fph43or5XvvIEnKTtcbiAgICAgICQoJyN3cm9uZ01zZycpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhamF4UG9zdChcbiAgICAgICAgcHJlZml4ICsgcGF0aCArIHV1aWQgKyAnLycsXG4gICAgICAgICdwaG9uZT0nICsgcGhvbmVOdW1iZXIgKyAnJnRlYW09JyArIHZvdGVUZWFtLFxuICAgICAgICBwb3N0UGhvbmVOdW1iZXIsXG4gICAgICAgIGhhbmRsZUFqYXhGYWlsXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
