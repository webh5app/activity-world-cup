'use strict';

;(function ($) {
  var prefix = 'http://10.124.18.115:8080/';
  // var prefix = '/';
  var path = 'api/v1/activity/worldcup/';
  var uuid = '52ab7bc3-b36d-454e-a9e3-79c72891abf6/';
  // var uuid = location.pathname.split('/')[3];
  var ajaxUrl = prefix + path + uuid;
  var registerUrl;
  var shortUrl;
  // console.log(ajaxUrl);
  var hostName, hostNameCN, hostFlag;
  var guestName, guestNameCN, guestFlag;
  var voteFor;
  var showVoteNumbers = function showVoteNumbers(data) {
    console.log(data);
    registerUrl = data.register_url;
    shortUrl = data.short_url;
    hostName = data.host.name;
    hostNameCN = data.host.nameCN;
    hostFlag = data.host.flag;
    guestName = data.guest.name;
    guestNameCN = data.guest.nameCN;
    guestFlag = data.guest.flag;
    $('#vote-button-1').text('支持' + hostNameCN);
    $('#vote-button-2').text('支持' + guestNameCN);
    $('#vote-number-country-1').text(data.host.vote);
    $('#vote-number-country-2').text(data.guest.vote);

    $('#flag1').attr('src', 'http://o82r0gv7d.bkt.clouddn.com/images/' + hostFlag + '.png');
    $('#flag2').attr('src', 'http://o82r0gv7d.bkt.clouddn.com/images/' + guestFlag + '.png');
    $('.content-register-container a').attr('href', registerUrl);
  };

  var doAjax = function doAjax(reqType, url, parameters, callback) {
    if (reqType === 'get') {
      var xhr = $.getJSON(url, parameters);
    } else {
      var xhr = $.post(url, parameters);
    }

    // Promise callbacks
    xhr.done(function (data, textStatus, jqXHR) {
      callback(data);
    }).fail(function (jqXHR, textStatus, err) {
      // console.log('failed!');
      $('#alert-box-container').removeClass('display-none');
      $('#alert-box-content').text('网络错误！请重试！');
      $('#alert-box-button').addClass('display-none');
    });
  };

  doAjax('get', ajaxUrl, {}, showVoteNumbers);

  $('#vote-button-1').on('click', function (event) {
    event.preventDefault();
    voteFor = hostName;
    $('.container').addClass('transfer1');
  });

  $('#vote-button-2').on('click', function (event) {
    event.preventDefault();
    voteFor = guestName;
    $('.container').addClass('transfer1');
  });

  var confirmPhoneNumber = function confirmPhoneNumber(data) {
    $('#process-container').removeClass('toggled');
    // console.log(data);
    /* 错误参数提示：
    ** 400718 缺少参数 phone=(...)&team(...)
    ** 400719 手机号错误
    ** 400720 队名错误
    ** 400721 投过票了
    */

    if (data.errcode === undefined) {
      $('.container').addClass('transfer2');
      $('.page3 form input').val(shortUrl);
    } else {
      var error;
      switch (data.errcode) {
        case 400718:
          error = "发生错误，请重新输入！";
          console.log("Error code: 400718, 缺少参数 phone=(...)&team(...)");
          break;
        case 400719:
          error = "手机号码错误！";
          console.log("Error code: 400719, 手机号码错误！");
          break;
        case 400720:
          error = "发生错误，请重新输入！";
          console.log("Error code: 400720, 队伍名称错误！");
          break;
        case 400721:
          error = "此手机号已投过票了哦！";
          console.log("Error code: 400721, 此手机号已投过票！");
          break;
        default:
          error = "发生未知错误，请重新输入！";
          console.log("Unknown error!");
          break;
      }

      window.setTimeout(function () {
        $('#alert-box-container').removeClass('display-none');
        $('#alert-box-content').text(error);
        $('#alert-box-button').on('click', function (event) {
          event.preventDefault();
          $('#alert-box-container').addClass('display-none');
          $('.page2 form input').val('');
          $('.page2 form input').focus();
        });
      }, 0);
    }
  };

  $('#confirm').on('click', function (event) {
    event.preventDefault();
    var phoneNumber = $('.page2 form input').val();
    var phoneNumberRegExp = new RegExp('(^(13\\d|15[^4,\\D]|17[13678]|18\\d)\\d{8}|170[^346,\\D]\\d{7})$', 'g');
    if (phoneNumberRegExp.test(phoneNumber)) {
      var parameters = 'phone=' + phoneNumber + '&team=' + voteFor;
      $('#process-container').addClass('toggled');
      doAjax('post', ajaxUrl, parameters, confirmPhoneNumber);
    } else {
      // 手机号格式错误
      window.setTimeout(function () {
        $('#alert-box-container').removeClass('display-none');
        $('#alert-box-content').text('手机号码有误！');
        $('#alert-box-button').on('click', function (event) {
          console.log(event.type);
          event.preventDefault();
          $('#alert-box-container').addClass('display-none');
          $('.page2 form input').val('');
          $('.page2 form input').focus();
        });
      }, 0);
    }
  });

  $('#copy').on('click', function (event) {
    event.preventDefault();
  });
})(Zepto);
//# sourceMappingURL=data:application/json;base64,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TjtBQUNELEdBRkQ7QUFJRCxDQWxKQSxFQWtKRSxLQWxKRiIsImZpbGUiOiJ3b3JsZGN1cC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKCQpe1xuICB2YXIgcHJlZml4ID0gJ2h0dHA6Ly8xMC4xMjQuMTguMTE1OjgwODAvJztcbiAgLy8gdmFyIHByZWZpeCA9ICcvJztcbiAgdmFyIHBhdGggPSAnYXBpL3YxL2FjdGl2aXR5L3dvcmxkY3VwLydcbiAgdmFyIHV1aWQgPSAnNTJhYjdiYzMtYjM2ZC00NTRlLWE5ZTMtNzljNzI4OTFhYmY2Lyc7XG4gIC8vIHZhciB1dWlkID0gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKVszXTtcbiAgdmFyIGFqYXhVcmwgPSBwcmVmaXggKyBwYXRoICsgdXVpZDtcbiAgdmFyIHJlZ2lzdGVyVXJsO1xuICB2YXIgc2hvcnRVcmw7XG4gIC8vIGNvbnNvbGUubG9nKGFqYXhVcmwpO1xuICB2YXIgaG9zdE5hbWUsIGhvc3ROYW1lQ04sIGhvc3RGbGFnO1xuICB2YXIgZ3Vlc3ROYW1lLCBndWVzdE5hbWVDTiwgZ3Vlc3RGbGFnO1xuICB2YXIgdm90ZUZvcjtcbiAgdmFyIHNob3dWb3RlTnVtYmVycyA9IChkYXRhKSA9PiB7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgcmVnaXN0ZXJVcmwgPSBkYXRhLnJlZ2lzdGVyX3VybDtcbiAgICBzaG9ydFVybCA9IGRhdGEuc2hvcnRfdXJsO1xuICAgIGhvc3ROYW1lID0gZGF0YS5ob3N0Lm5hbWU7XG4gICAgaG9zdE5hbWVDTiA9IGRhdGEuaG9zdC5uYW1lQ047XG4gICAgaG9zdEZsYWcgPSBkYXRhLmhvc3QuZmxhZztcbiAgICBndWVzdE5hbWUgPSBkYXRhLmd1ZXN0Lm5hbWU7XG4gICAgZ3Vlc3ROYW1lQ04gPSBkYXRhLmd1ZXN0Lm5hbWVDTjtcbiAgICBndWVzdEZsYWcgPSBkYXRhLmd1ZXN0LmZsYWc7XG4gICAgJCgnI3ZvdGUtYnV0dG9uLTEnKS50ZXh0KCfmlK/mjIEnICsgaG9zdE5hbWVDTik7XG4gICAgJCgnI3ZvdGUtYnV0dG9uLTInKS50ZXh0KCfmlK/mjIEnICsgZ3Vlc3ROYW1lQ04pO1xuICAgICQoJyN2b3RlLW51bWJlci1jb3VudHJ5LTEnKS50ZXh0KGRhdGEuaG9zdC52b3RlKTtcbiAgICAkKCcjdm90ZS1udW1iZXItY291bnRyeS0yJykudGV4dChkYXRhLmd1ZXN0LnZvdGUpO1xuXG4gICAgJCgnI2ZsYWcxJykuYXR0cignc3JjJywgJ2h0dHA6Ly9vODJyMGd2N2QuYmt0LmNsb3VkZG4uY29tL2ltYWdlcy8nICsgaG9zdEZsYWcgKyAnLnBuZycpO1xuICAgICQoJyNmbGFnMicpLmF0dHIoJ3NyYycsICdodHRwOi8vbzgycjBndjdkLmJrdC5jbG91ZGRuLmNvbS9pbWFnZXMvJyArIGd1ZXN0RmxhZyArICcucG5nJyk7XG4gICAgJCgnLmNvbnRlbnQtcmVnaXN0ZXItY29udGFpbmVyIGEnKS5hdHRyKCdocmVmJywgcmVnaXN0ZXJVcmwpO1xuICB9O1xuXG4gIHZhciBkb0FqYXggPSAocmVxVHlwZSwgdXJsLCBwYXJhbWV0ZXJzLCBjYWxsYmFjaykgPT4ge1xuICAgIGlmIChyZXFUeXBlID09PSAnZ2V0Jykge1xuICAgICAgdmFyIHhociA9ICQuZ2V0SlNPTih1cmwsIHBhcmFtZXRlcnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgeGhyID0gJC5wb3N0KHVybCwgcGFyYW1ldGVycyk7XG4gICAgfVxuXG4gICAgLy8gUHJvbWlzZSBjYWxsYmFja3NcbiAgICB4aHIuZG9uZSgoZGF0YSwgdGV4dFN0YXR1cywganFYSFIpID0+IHtcbiAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgIH0pXG4gICAgLmZhaWwoKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnIpID0+IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdmYWlsZWQhJyk7XG4gICAgICAkKCcjYWxlcnQtYm94LWNvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdkaXNwbGF5LW5vbmUnKTtcbiAgICAgICQoJyNhbGVydC1ib3gtY29udGVudCcpLnRleHQoJ+e9kee7nOmUmeivr++8geivt+mHjeivle+8gScpO1xuICAgICAgJCgnI2FsZXJ0LWJveC1idXR0b24nKS5hZGRDbGFzcygnZGlzcGxheS1ub25lJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgZG9BamF4KCdnZXQnLCBhamF4VXJsLCB7fSwgc2hvd1ZvdGVOdW1iZXJzKTtcblxuXG4gICQoJyN2b3RlLWJ1dHRvbi0xJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2b3RlRm9yID0gaG9zdE5hbWU7XG4gICAgJCgnLmNvbnRhaW5lcicpLmFkZENsYXNzKCd0cmFuc2ZlcjEnKTtcbiAgfSk7XG5cbiAgJCgnI3ZvdGUtYnV0dG9uLTInKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZvdGVGb3IgPSBndWVzdE5hbWU7XG4gICAgJCgnLmNvbnRhaW5lcicpLmFkZENsYXNzKCd0cmFuc2ZlcjEnKTtcbiAgfSk7XG5cbiAgdmFyIGNvbmZpcm1QaG9uZU51bWJlciA9IChkYXRhKSA9PiB7XG4gICAgJCgnI3Byb2Nlc3MtY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ3RvZ2dsZWQnKTtcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAvKiDplJnor6/lj4LmlbDmj5DnpLrvvJpcbiAgICAqKiA0MDA3MTgg57y65bCR5Y+C5pWwIHBob25lPSguLi4pJnRlYW0oLi4uKVxuICAgICoqIDQwMDcxOSDmiYvmnLrlj7fplJnor69cbiAgICAqKiA0MDA3MjAg6Zif5ZCN6ZSZ6K+vXG4gICAgKiogNDAwNzIxIOaKlei/h+elqOS6hlxuICAgICovXG5cbiAgICBpZihkYXRhLmVycmNvZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgJCgnLmNvbnRhaW5lcicpLmFkZENsYXNzKCd0cmFuc2ZlcjInKTtcbiAgICAgICQoJy5wYWdlMyBmb3JtIGlucHV0JykudmFsKHNob3J0VXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGVycm9yO1xuICAgICAgc3dpdGNoIChkYXRhLmVycmNvZGUpIHtcbiAgICAgICAgY2FzZSA0MDA3MTg6XG4gICAgICAgICAgZXJyb3IgPSBcIuWPkeeUn+mUmeivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgY29kZTogNDAwNzE4LCDnvLrlsJHlj4LmlbAgcGhvbmU9KC4uLikmdGVhbSguLi4pXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQwMDcxOTpcbiAgICAgICAgICBlcnJvciA9IFwi5omL5py65Y+356CB6ZSZ6K+v77yBXCI7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBjb2RlOiA0MDA3MTksIOaJi+acuuWPt+eggemUmeivr++8gVwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0MDA3MjA6XG4gICAgICAgICAgZXJyb3IgPSBcIuWPkeeUn+mUmeivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgY29kZTogNDAwNzIwLCDpmJ/kvI3lkI3np7DplJnor6/vvIFcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDAwNzIxOlxuICAgICAgICAgIGVycm9yID0gXCLmraTmiYvmnLrlj7flt7LmipXov4fnpajkuoblk6bvvIFcIjtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGNvZGU6IDQwMDcyMSwg5q2k5omL5py65Y+35bey5oqV6L+H56Wo77yBXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGVycm9yID0gXCLlj5HnlJ/mnKrnn6XplJnor6/vvIzor7fph43mlrDovpPlhaXvvIFcIjtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVua25vd24gZXJyb3IhXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICQoJyNhbGVydC1ib3gtY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ2Rpc3BsYXktbm9uZScpO1xuICAgICAgICAkKCcjYWxlcnQtYm94LWNvbnRlbnQnKS50ZXh0KGVycm9yKTtcbiAgICAgICAgJCgnI2FsZXJ0LWJveC1idXR0b24nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICQoJyNhbGVydC1ib3gtY29udGFpbmVyJykuYWRkQ2xhc3MoJ2Rpc3BsYXktbm9uZScpO1xuICAgICAgICAgICQoJy5wYWdlMiBmb3JtIGlucHV0JykudmFsKCcnKTtcbiAgICAgICAgICAkKCcucGFnZTIgZm9ybSBpbnB1dCcpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9O1xuXG4gICQoJyNjb25maXJtJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgIHZhciBwaG9uZU51bWJlciA9ICQoJy5wYWdlMiBmb3JtIGlucHV0JykudmFsKCk7XG4gICAgIHZhciBwaG9uZU51bWJlclJlZ0V4cCA9IG5ldyBSZWdFeHAoJyheKDEzXFxcXGR8MTVbXjQsXFxcXERdfDE3WzEzNjc4XXwxOFxcXFxkKVxcXFxkezh9fDE3MFteMzQ2LFxcXFxEXVxcXFxkezd9KSQnLCAnZycpO1xuICAgICBpZihwaG9uZU51bWJlclJlZ0V4cC50ZXN0KHBob25lTnVtYmVyKSkge1xuICAgICAgIHZhciBwYXJhbWV0ZXJzID0gJ3Bob25lPScgKyBwaG9uZU51bWJlciArICcmdGVhbT0nICsgdm90ZUZvcjtcbiAgICAgICAkKCcjcHJvY2Vzcy1jb250YWluZXInKS5hZGRDbGFzcygndG9nZ2xlZCcpO1xuICAgICAgIGRvQWpheCgncG9zdCcsIGFqYXhVcmwsIHBhcmFtZXRlcnMsIGNvbmZpcm1QaG9uZU51bWJlcik7XG4gICAgIH0gZWxzZSB7XG4gICAgICAgLy8g5omL5py65Y+35qC85byP6ZSZ6K+vXG4gICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgJCgnI2FsZXJ0LWJveC1jb250YWluZXInKS5yZW1vdmVDbGFzcygnZGlzcGxheS1ub25lJyk7XG4gICAgICAgICAkKCcjYWxlcnQtYm94LWNvbnRlbnQnKS50ZXh0KCfmiYvmnLrlj7fnoIHmnInor6/vvIEnKTtcbiAgICAgICAgICQoJyNhbGVydC1ib3gtYnV0dG9uJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LnR5cGUpO1xuICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAkKCcjYWxlcnQtYm94LWNvbnRhaW5lcicpLmFkZENsYXNzKCdkaXNwbGF5LW5vbmUnKTtcbiAgICAgICAgICAgJCgnLnBhZ2UyIGZvcm0gaW5wdXQnKS52YWwoJycpO1xuICAgICAgICAgICAkKCcucGFnZTIgZm9ybSBpbnB1dCcpLmZvY3VzKCk7XG4gICAgICAgICB9KTtcbiAgICAgICB9LCAwKTtcbiAgICAgfVxuICB9KTtcblxuICAkKCcjY29weScpLm9uKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH0pO1xuXG59KShaZXB0byk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
