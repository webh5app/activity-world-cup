"use strict";!function(e){var t,o,n,a,r,c,l,s,i,u="/",d="api/v1/activity/worldcup/",f=location.pathname.split("/")[3],p=u+d+f,g=function(i){console.log(i),t=i.register_url,o=i.short_url,n=i.host.name,a=i.host.nameCN,r=i.host.flag,c=i.guest.name,l=i.guest.nameCN,s=i.guest.flag,e("#vote-button-1").text("支持"+a),e("#vote-button-2").text("支持"+l),e("#vote-number-country-1").text(i.host.vote),e("#vote-number-country-2").text(i.guest.vote),e("#flag1").attr("src","http://o82r0gv7d.bkt.clouddn.com/images/"+r+".png"),console.log(e("#flag1").attr("src")),e("#flag2").attr("src","http://o82r0gv7d.bkt.clouddn.com/images/"+s+".png"),e(".content-register-container a").attr("href",t)},v=function(t,o,n,a){if("get"===t)var r=e.getJSON(o,n);else var r=e.post(o,n);r.done(function(e,t,o){a(e)}).fail(function(t,o,n){e("#alert-box-container").removeClass("display-none"),e("#alert-box-content").text("网络错误！请重试！"),e("#alert-box-button").addClass("display-none")})};v("get",p,{},g),e("#vote-button-1").on("click",function(t){t.preventDefault(),i=n,e(".container").addClass("transfer1")}),e("#vote-button-2").on("click",function(t){t.preventDefault(),i=c,e(".container").addClass("transfer1")});var b=function(t){if(e("#process-container").removeClass("toggled"),void 0===t.errcode)e(".container").addClass("transfer2"),e(".page3 form input").val(o);else{var n;switch(t.errcode){case 400718:n="发生错误，请重新输入！",console.log("Error code: 400718, 缺少参数 phone=(...)&team(...)");break;case 400719:n="手机号码错误！",console.log("Error code: 400719, 手机号码错误！");break;case 400720:n="发生错误，请重新输入！",console.log("Error code: 400720, 队伍名称错误！");break;case 400721:n="此手机号已投过票了哦！",console.log("Error code: 400721, 此手机号已投过票！");break;default:n="发生未知错误，请重新输入！",console.log("Unknown error!")}window.setTimeout(function(){e("#alert-box-container").removeClass("display-none"),e("#alert-box-content").text(n),e("#alert-box-button").on("click",function(t){t.preventDefault(),e("#alert-box-container").addClass("display-none"),e(".page2 form input").val(""),e(".page2 form input").focus()})},0)}};e("#confirm").on("click",function(t){t.preventDefault();var o=e(".page2 form input").val(),n=new RegExp("(^(13\\d|15[^4,\\D]|17[13678]|18\\d)\\d{8}|170[^346,\\D]\\d{7})$","g");if(n.test(o)){var a="phone="+o+"&team="+i;e("#process-container").addClass("toggled"),v("post",p,a,b)}else window.setTimeout(function(){e("#alert-box-container").removeClass("display-none"),e("#alert-box-content").text("手机号码有误！"),e("#alert-box-button").on("click",function(t){console.log(t.type),t.preventDefault(),e("#alert-box-container").addClass("display-none"),e(".page2 form input").val(""),e(".page2 form input").focus()})},0)}),e("#copy").on("click",function(e){e.preventDefault(),console.log("copy!")})}(Zepto);