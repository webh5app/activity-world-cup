"use strict";!function(e){var t,o,n,r,a,c,s="http://10.124.18.115:8080/",l="api/v1/activity/worldcup/",i="52ab7bc3-b36d-454e-a9e3-79c72891abf6/",u=s+l+i,d=function(c){console.log(c),t=c.register_url,o=c.host.nameCN,n=c.host.flag,r=c.guest.nameCN,a=c.guest.flag,e("#vote-button-1").text("支持"+o),e("#vote-button-2").text("支持"+r),e("#vote-number-country-1").text(c.host.vote),e("#vote-number-country-2").text(c.guest.vote),e("#flag1").attr("src","http://o82r0gv7d.bkt.clouddn.com/images/"+n+".png"),e("#flag2").attr("src","http://o82r0gv7d.bkt.clouddn.com/images/"+a+".png"),e(".content-register-container a").attr("href",t)},f=function(t,o,n,r){if("get"===t)var a=e.getJSON(o,n);else var a=e.post(o,n);a.done(function(e,t,o){r(e)}).fail(function(e,t,o){console.log(o.toString())})};f("get",u,{},d),e("#vote-button-1").on("click",function(t){t.preventDefault(),c=o,e(".container").addClass("transfer1")}),e("#vote-button-2").on("click",function(t){t.preventDefault(),c=r,e(".container").addClass("transfer1")});var g=function(t){if(e("#process-container").removeClass("toggled"),void 0===t.errcode)e(".container").addClass("transfer2");else{var o;switch(t.errcode){case 400718:o="发生错误，请重新输入！",console.log("Error code: 400718, 缺少参数 phone=(...)&team(...)");break;case 400719:o="手机号码错误！",console.log("Error code: 400719, 手机号码错误！");break;case 400720:o="发生错误，请重新输入！",console.log("Error code: 400720, 队伍名称错误！");break;case 400721:o="此手机号已投过票了哦！",console.log("Error code: 400721, 此手机号已投过票！");break;default:o="发生未知错误，请重新输入！",console.log("Unknown error!")}window.setTimeout(function(){e("#alert-box-container").removeClass("display-none"),e("#alert-box-content").text(o),e("#alert-box-button").on("click",function(t){t.preventDefault(),e("#alert-box-container").addClass("display-none"),e(".page2 form input").val(""),e(".page2 form input").focus()})},0)}};e("#confirm").on("click",function(t){t.preventDefault();var o=e(".page2 form input").val(),n=new RegExp("(^(13\\d|15[^4,\\D]|17[13678]|18\\d)\\d{8}|170[^346,\\D]\\d{7})$","g");if(n.test(o)){var r="phone="+o+"&team="+c;e("#process-container").addClass("toggled"),f("post",u,r,g)}else window.setTimeout(function(){e("#alert-box-container").removeClass("display-none"),e("#alert-box-content").text("手机号码有误！"),e("#alert-box-button").on("click",function(t){t.preventDefault(),e("#alert-box-container").addClass("display-none"),e(".page2 form input").val(""),e(".page2 form input").focus()})},0)})}(Zepto);